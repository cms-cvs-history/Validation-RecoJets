process Closure = {
# output level
  include "FWCore/MessageLogger/data/MessageLogger.cfi"
  replace MessageLogger.cerr.FwkReport.reportEvery = 1000

# input file(s)
  include "Validation/RecoJets/test/testSample.cff"
  untracked PSet maxEvents = {untracked int32 input = 10000}

# provide record's IVO
  include "Validation/RecoJets/data/calibrationService.cff"


#-----------------------------------------------------
# to apply uhh calibration do:
# cvs co -d Calibration UserCode/Bromo/Calibration
# cvs up -r uhh_calib_080604 Calibration/CalibMaker
# scramv1 b -r Calibration
#-----------------------------------------------------
  include "Validation/RecoJets/data/calibrationGlob.cff"
  sequence makeCalibGlob = {makeGlobAll}

#-----------------------------------------------------
# apply calibration from factorized approach
#-----------------------------------------------------
  include "Validation/RecoJets/data/calibrationFact.cff"
  sequence makeCalibFact = {makeFactAll}

#-----------------------------------------------------
# apply calibration from monolythic approach
#-----------------------------------------------------
  include "Validation/RecoJets/data/calibrationMono.cff"
  sequence makeCalibMono = {makeMonoAll}


#-----------------------------------------------------
# analyze calibration closure
#-----------------------------------------------------
  include "Validation/RecoJets/data/GenJetClosure_algs.cff"
# include "Validation/RecoJets/data/GenJetClosure_fkt6.cff"
# include "Validation/RecoJets/data/GenJetClosure_icone5.cff"
# include "Validation/RecoJets/data/GenJetClosure_mcone5.cff"
# include "Validation/RecoJets/data/GenJetClosure_mcone7.cff"

  sequence makeClosure = {makeCalibClosure}

# file service
  service = TFileService {
    string fileName = "genJetClosure.root"
  }

# uncomment to apply calibration
  path p1 = {makeCalibGlob}
  path p2 = {makeCalibFact}
  path p3 = {makeCalibMono}
  endpath p = {makeClosure}
}
